# Public Opinion Analysis of TikTok Hot Search Based on NLP (1)

3XEOLF2SLQLRQ$QDO\VLVRI7L N7RN+RW6HDUFK%DVHGRQ1/3
=KDQJOLDR;X
6FKRRORI,QIRUPDWLRQ(QJLQHHULQJ
.XQPLQJ8QLYHUVLW\
.XQPLQJ&KLQD
HPDLO#TTFRP+RQJOLQJ+H
+RQJOLQJ+H6FKRRORI,QIRUPDWLRQ(QJLQHHULQJ
.XQPLQJ8QLYHUVLW\
.XQPLQJ&KLQD
HPDLO#TTFRP
;LVRQJ0LDR
6FKRRORI,QIRUPDWLRQ(QJLQHHULQJ
.XQPLQJ8QLYHUVLW\
.XQPLQJ&KLQD
HPDLOPLDR[LVRQJBNPX#FRP%R\DQJ:DQJ
6FKRRORI,QIRUPDWLRQ(QJLQHHULQJ
.XQPLQJ8QLYHUVLW\
.XQPLQJ&KLQD
HPDLO#TTFRP
$EVWUDFWÂ²,I WKH RXWEXUVW RI QHWZRUN SXEOLF RSLQLRQ LV QRW
FRQWUROOHG LQ WLPH LW PD\ HYHQ DOORZ QHWL]HQV WR PDS WKH
HPRWLRQV YHQWHG RQOLQH WR WKH UHDO VRFLHW\ FDXVLQJ HFRQRPLF
DQG RWKHU ORVVHV WR WKH UHDO VRFLHW\ 7KLV SDSHU DLPV WR
HVWDEOLVK D SXEOLF RSLQLRQ DQDO\VLV V\VWHP EDVHG RQ 1/3 IRU
7LNWRN KRW VHDUFK ZKLFK FDQ TXLFNO\ JUDVS WKH RQOLQH SXEOLF
RSLQLRQ RI 7LNWRN KRW VHDUFK UHIOHFW WKH DWWLWXGH RI YDULRXV
UHJLRQV LQ &KLQD WRZDUGV WKH KRW VSRW WKURXJK GDWD
YLVXDOL]DWLRQ JUDVS WKH WUHQG RI SXEOLF RSLQLRQ DYRLG WKH
HVFDODWLRQ RI SXEOLF RSLQLRQ DQG SUHYHQW SXEOLF RSLQLRQ
FULVLV7KH 1/3 QDWXUDO ODQJXDJH SURFHVVLQJ DOJRULWKP LV
DQDO\]HG DQG WKH LPSOHPHQWDWLRQ SURFHVV RI 'RX\LQ FUDZOHU
DQG WKH VHQWLPHQW DQDO\VLV RIFRPPHQWV DUH GHVFULEHG LQ GHWDLO
,Q WKLV V\VWHP WKH UHYLHZ LQIRUPDWLRQ RI 'RX\LQ KRW VHDUFK LV
REWDLQHG E\ 6FUDS\ IUDPHZRUN GDWD SUHSURFHVVLQJ LV FDUULHG
RXW WKHQ WKH -LHED &KLQHVH ZRUG VHJPHQWDWLRQ WHFKQRORJ\ LV
DGRSWHG WR SXW WKH UHYLHZ GDWD LQWR WKH 6QRZ1/3 PRGHO IRU
HPRWLRQ DQDO\VLV DQG WKH VHQWLPHQW YDOXH RI WKH UHYLHZ LV
REWDLQHG DQG WKH GDWD LV YLVXDOL]HG DQG WKHQ WKH )ODVN
YLVXDOL]DWLRQ VFUHHQ LVEXLOW
.H\ZRUGV2QOLQH SXEOLF RSLQLRQ 6FUDS\ IUDPHZRUN 1/3
QDWXUDOODQJXDJHSURFHVVLQJ(PRWLRQDQDO\VLV'DWDPLQLQJ
, ,1752'8&7,21
$5HVHDUFK %DFNJURXQG
$FFRUGLQJ WR WKH VWDWLVWLFDO UHSRUW RQ &KLQD
V QHWZRUN
GHYHORSPHQW UHOHDVHG E\ &KLQD ,QWHUQHW 1HWZRUN
,QIRUPDWLRQ &HQWHU &11,& DV RI -XQH  WKH QXPEHU
RI QHWL]HQV LQ &KLQD ZDV  ELOOLRQ  PLOOLRQ PRUH
WKDQWKDWLQ'HFHPEHUDQGWKH,QWHUQHWSHQHWUDWLRQUDWH
UHDFKHG  $Q LQFUHDVH RI  SHUFHQWDJH SRLQWV IURP
'HFHPEHU>@$VVKRZQLQ)LJEHORZ
)LJXUH2XUFRXQWU\QHWL]HQVFDOHDQGLQWHUQHWSRSXODULW\UDWH
'RX\LQ DV WKH VKRUW YLGHR VRIWZDUH ZLWK WKH PRVW XVHUV
LV D KRWEHG RI RQOLQH SXEOLF RSLQLRQ ,I WKH RXWEXUVW RI
QHWZRUNSXEOLFRSLQLRQLVQRWFRQWUROOHGLQWLPHLWPD\HYHQ
DOORZQHWL]HQVWR PDSWKHHPRWLRQV YHQWHGRQOLQHWR WKHUHDO
VRFLHW\ FDXVLQJ HFRQRPLF DQG RWKHU ORVVHV WR WKH UHDO
VRFLHW\&KLQD
V ,QWHUQHWSHQHWUDWLRQUDWHKDVUHDFKHG 
8QGHUVXFKDODUJHQHWL]HQEDVHWKHVSHHGRIQHWZRUNSXEOLF
RSLQLRQ ZLOO EH LPPHDVXUDEOH 7KH IHUPHQWLQJ VSHHG RI
RQOLQH SXEOLF RSLQLRQ ZLOO EH X QLPDJLQDEOH 0DQ\ QHWL]HQV
ZLOO EH OHG E\ VRPH FULPLQDOV WR IROORZ WKH WUHQG RI
FRPPHQWVGHYLDWLQJIURPWKHFRUUHFWYDOXHVDQGZRUOGYLHZ
VR LW LV YHU\ LPSRUWDQW WR DQDO\]H WKH SXEOLF RSLQLRQ RI
'RX\LQKRWVHDUFKFRPPHQWV
% 5HVHDUFK 3XUSRVH DQG6LJQLILFDQFH
7KLV SDSHU SURSRVHV WR XVH WKH ZHE FUDZOHU PHWKRG WR
FUDZOWKHKRWVHDUFKGDWDRI'RX\LQLQUHDOWLPHPRQLWRUWKH
KRW VHDUFK RI 'RX\LQ DQG XVH WKH 1DWXUDO /DQJXDJH
3URFHVVLQJDOJRULWKP 1/3IRUWH[WSURFHVVLQJDQGHPRWLRQ
DQDO\VLV RI KRW VHDUFK LQIRUPDWLRQ DQG FRPPHQWV 7KH
SRVLWLYH QHXWUDO DQG QHJDWLYH DWWLWXGHV RI FRPPHQWV LQ
GLIIHUHQW UHJLRQV ZHUH HYDOXDWHG DQG WKH VWDWXV RI WKH
WUHQGLQJ VHDUFKHV LQ GLIIHUHQW SURYLQFHV ZDV GLVSOD\HG RQ
WKHPDSRI&KLQDWKURXJKGDWDYLVXDOL]DWLRQ
2812023 5th International Conference on Applied Machine Learning (ICAML)
979-8-3503-4141-6/23/$31.00 Â©2023 IEEE
DOI 10.1109/ICAML60083.2023.000602023 5th International Conference on Applied Machine Learning (ICAML) | 979-8-3503-4141-6/23/$31.00 Â©2023 IEEE | DOI: 10.1109/ICAML60083.2023.000602023 5th International Conference onApplied Machine Learning (ICAML)
Public Opinion Analysis ofTikTok Hot Search Based on NLP
Zhangliao Xu
School ofInformation Engineering
Kunming University
Kunming, China
email: 1693241822@qq.comHongling He
Hongling HeSchool ofInformation Engineering
Kunming University
Kunming, China
email: 653353835@qq.com
Figure I. Our country netizen scale and internet popularity rateBoyangWang
School ofInformation Engineering
Kunming University
Kunming, China
email: 782931627@qq.com
2022 .6K
2022 .6II730""
103195 '061 '"
202 1. 1 2718"4
2021. 670""
2020.12Netizen scale and Internet penetrat ionrate
2020 .6
Douyin, as the short video software with the most users,
is a hotbed ofonline public opinion. Ifthe outburst of
network public opinion is not controlled in time, it may even
allow netizens to map the emotions vented online to the real
society, causing economic and other losses to the real
society. China's Internet penetration rate has reached 74.4%.
Under such a large netizen base, the speed ofnetwork public
opinion will be immeasurable. The fermenting speed of
online public opinion will be unimaginable. Many netizens
will be led by some criminals to follow the trend of
comments, deviating from the correct values and world view,
so it is very important to analyze the public opinion of
Douyin hot search comments.
B.Research Purpose andSignificance
This paper proposes to use the web crawler method to
crawl the hot search data ofDouyin in real time, monitor the
hot search ofDouyin, and use the Natural Language
Processing algorithm (NLP) for text processing and emotion
analysis ofhot search information and comments. The
positive, neutral and negative attitudes ofcomments in
different regions were evaluated, and the status ofthe
trending searches in different provinces was displayed on
the map ofChina through data visualization.I.INTRODUCTIONXisong Miao*
School ofInformation Engineering
Kunming University
Kunming, China
email: miaoxisongJanu@163.com
Keywords-Online public opinion; Scrapy framework; NLP
natural language processing; Emotion analysis; Data mining.Abstract-If the outburst ofnetwork public OpInIOn isnot
controlled intime, it may even allow netizens tomap the
emotions vented online to the real society, causing economic
and other losses to the real society. This paper aims to
establish apublic opinion analysis system based onNLP for
Tiktok hotsearch, which can quickly grasp theonline public
opinion ofTiktok hot search, reflect theattitude ofvarious
regions inChina towards the hot spot through data
visualization, grasp the trend ofpublic opinion, avoid the
escalation ofpublic opinion and prevent public opinion
crisis.The NLP natural language processing algorithm is
analyzed, and theimplementation process ofDouyin crawler
and thesentiment analysis ofcomments aredescribed indetail.
Inthis system, thereview information ofDouyin hotsearch is
obtained byScrapy framework, data preprocessing iscarried
out, then theJieba Chinese word segmentation technology is
adopted toput thereview data into theSnowNLP model for
emotion analysis, and the sentiment value ofthe review is
obtained, and the data isvisualized, and then the Flask
visualization screen isbuilt.
A. Research Background
According to the statistical report on China's network
development released by China Internet Network
Information Center (CNNIC), as ofJune 2022, the number
ofnetizens in China was 1.051 billion, 19.19 million more
than that in December 2021, and the Internet penetration rate
reached 74.4%. An increase of1.4percentage points from
December 2021 [1].As shown in Fig. 1 below:
979-8-3503-4141-6/23/$31.00 Â©2023lEEE
DOlI0.I109/lCAML60083.2023.00060281
Authorized licensed use limited to: University of Shanghai For Science and Technology. Downloaded on November 18,2024 at 10:07:18 UTC from IEEE Xplore.  Restrictions apply. 
1/3EDVHG7LNWRNKRWVHDUFKSXEOLFRSLQLRQDQDO\VLVFDQ
TXLFNO\JUDVSWKHRQOLQHSXEOL FRSLQLRQRI7LNWRNKRWVHDUFK
UHIOHFW WKH DWWLWXGH RI GLIIHUHQW UHJLRQV RI &KLQD WRZDUGV WKH
KRWVSRWWKURXJK GDWDYLVXDOL]DWLRQ JUDVS WKHWUHQG RISXEOLF
RSLQLRQ DYRLG SXEOLF RSLQLRQ HVFDODWLRQ DQG SUHYHQW SXEOLF
RSLQLRQFULVLV
,,5(/$7('7(&+12/2*,(6 $1' &21&(376
$ :HE&UDZOHU 7HFKQRORJ\
&UDZOHU WHFKQRORJ\ UHIHUV WR WKH WHFKQRORJ\ RI
DXWRPDWLFDOO\ REWDLQLQJ ZHE VLWH LQIRUPDWLRQ ZKLFK FDQ
UHDOL]H WKH PDVV DFTXLVLWLRQ RI QHWZRUN LQIRUPDWLRQ DQG
TXLFNO\ REWDLQ DOO WKH LQIRUPDWLRQ \RX FDQ VHH RQ WKH ZHE
SDJH ,W PDNHV D UHTXHVW WR KWWS E\ XVLQJ 85/ REWDLQV WKH
FRQWHQWRIKWWS UHVSRQVHDQDO\]HVWKH KWWSUHVSRQVHH[WUDFWV
WKH FRQWHQW DQG VFUHHQV FOHDQV DQG VDYHV WKH GDWD $V
VKRZQLQ)LJEHORZ
)LJXUH)ORZFKDUWRIFUDZOHUWHFKQRORJ\
 6FUDS\IUDPHZRUN
6FUDS\ LV D FUDZOHU IUDPHZRUN WKDW DSSOLHV WR 3\WKRQ
DQG LV SRZHUIXO HQRXJK WR TXLFNO\ FUDZO VFUHHQ DQG :HE
GDWD )LUVW WKH 6SLGHUH[WUDFWV GDWD DQG XUOV DQG VHQGV WKHP
WR WKH 6FUDS\ (QJLQH ZKLFK WKHQ WUDQVIHUV WKH 85/
UHFHLYHG WR WKH 6FKHGXOHU VFKHGXOHU 7KH 6FKHGXOHU
VFKHGXOHU VWRUHV UHTXHVWV IURP WKH 6FUDS\ (QJLQH DQG VRUWV
WKHP DQG VHQGV WKHP EDFN WR WKH 6FUDS\ (QJLQH $IWHU WKH
'RZQORDGHU GRZQORDGV FXVWRP GDWD DQG VHWV SUR[\ LW
UHWXUQV WR 6FUDS\ (QJLQH 6FUDS\ (QJLQH UHFHLYHV WKH UHVXOW
DQG UHWXUQV LW WR FUDZOHU 6SLGHU ZKLFK WKHQ SDUVHV DQG
SURFHVVHV+WPO GDWD7KH SDUVHGGDWDRIFUDZOHU6SLGHUZLOO
EH VHQW EDFN WR 6FUDS\ (QJLQH )LQDOO\ 6FUDS\ (QJLQH
UHFHLYHV WKH ILHOG GDWD VWRUHV LW WKURXJK WKH ,WHP 3LSHOLQH
DQGVHQGVWKHUHTXHVWWRWKH6FKHGXOHU>@6HH)LJEHORZ
)LJXUH2SHUDWLRQIORZFKDUWRI6FUDS\IUDPHZRUN
7$%/(,& 20321(17 (;3/$1$7,21 7$%/( 2)6&5$3<)5$0(:25.
1DPH ([SODLQ
6FUDS\(QJLQH (QJLQHGDWDWUDQVPLVVLRQ
6FKHGXOHU 6FKHGXOHUZKLFKKROGVWKHUHTXHVWTXHXH
'RZQORDGHU'RZQORDGHUGRZQORDGUHTXHVW
LQIRUPDWLRQ
6SLGHU &UDZOHUH[WUDFWGDWDDQG85/
,WHP3LSHOLQH 3LSHVVWRULQJDQGWUDQVPLWWLQJGDWD
'RZQORDGHU
0LGGOHZDUHV'RZQORDGWKHPLGGOHZDUHDQGVHWWKH,3
SUR[\
6SLGHU0LGGOHZDUHV
6SLGHU0LGGOHZDUHFXVWRP+773UHTXHVWV
7KH LPSOHPHQWDWLRQ RI 6FUDS\ FUDZOHU IUDPHZRUN LV
GLYLGHG LQWR ILYH EDVLF VWHSV )LUVWO\ 6FUDS\ VWDUWSURMHFW 
SURMHFWQDPH SURMHFWQDPH LV XVHG WR FUHDWH WKH SURMHFW DQG
WKHQ ILHOGV DUH FODULILHG WR VSHFLI\ WKH WDUJHW ILHOGV WR EH
FUDZOHG DQG LWHPVS\ ILOH LV ZULWWHQ WR PDNH FUDZOHU :ULWH
VSLGHUS\ILOHIRUZHEFUDZOLQJDQGVWRUHGDWDDIWHUFUDZOLQJ
'HVLJQ ,WHP 3LSHOLQH WR VWRUH WKH FUDZOHG GDWD DQG ZULWH
SLSHOLQH S\ )LQDOO\ UXQ VFUDS\ FUDZO VHDUFKV
-2%',5 FUDZOVVHDUFK WR VWDUW WKH HQWLUH 6FUDS\ SURMHFW>@
$VVKRZQLQ7DEOHá
 $QWLUHSWLOHWHFKQRORJ\
'XH WR WKH ZLGHVSUHDG XVH RI ZHE FUDZOHU WHFKQRORJ\
VRPH FULPLQDOV ZLOO XVH FUDZOHU WHFKQRORJ\ WR VWHDO GDWD RQ
VRPH ZHEVLWHV UHVXOWLQJ LQ WKH ORVV RI EHQHILWV RI VRPH
FRPSDQLHV ,Q DGGLWLRQ GXH WR WKH UDSLG GHYHORSPHQW RI
FUDZOHU WHFKQRORJ\ WKH QXPEHU RI UHTXHVWV WKDW FDQ EH
UHDFKHG HYHU\ VHFRQG FDQ EH KXQGUHGV RI YLVLWV WR WKH
ZHEVLWH DQG VXFK KLJK IUHTXHQF\ YLVLWV WR WKH ZHEVLWH ZLOO
OHDGWRWKHGLUHFWFROODSVHRIWKHVHUYHU8VHUVFDQQRWDFFHVV
WKH VLWH OLPLWLQJ WKH XVH RI ,3 OHDGV WR FUDZOHUV FDQ QRW
FRQWLQXHXVHUVFDQQRWREWDLQWKHGHVLUHGGDWD>@
,Q RUGHU WR SUHYHQW WKH LQYDVLRQ RI FUDZOHU VRIWZDUH
VRPH ZHEVLWHV ZLOO DGG D ORW RI LGHQWLW\ LGHQWLILFDWLRQ
PHWKRGVWRDQDO\]HWKHLGHQWLW\LQIRUPDWLRQSURYLGHGE\WKH
8VHU WR YLVLW WKH ZHEVLWH XVHUDJHQW DQG &RRNLH
LQIRUPDWLRQZKHQWKHVDPH,3LQIRUPDWLRQUHSHDWHGO\YLVLWV
282no
::J-a
iD..,NLP based Tiktok hot search public opinion analysis can
quickly grasp the online public opinion ofTiktok hot search,
reflect the attitude ofdifferent regions ofChina towards the
hot spot through data visualization, grasp the trend ofpublic
opinion, avoid public opinion escalation, andprevent public
opinion crisis.
II.RELATED TECHNOLOGIES AND CONCEPTS
A. Web Crawler Technology
Crawler technology refers to the technology of
automatically obtaining website information, which can
realize the mass acquisition ofnetwork information and
quickly obtain all the information you can see on the web
page. It makes a request to http by using URL, obtains the
content ofhttp response, analyzes the http response, extracts
the content, and screens, cleans and saves the data. As
shown i~.f}g,_~J~~IQ'Y~ ,
,,,,,,,,,,,
,,,,,,,,,,,,,,,l _
.--------------------------------., ..~~~.
Figure 2. Flow chart of crawler technology
1)Scrapy framework
Scrapy is a crawler framework that applies to Python
and is powerful enough toquickly crawl screen and Web
data. First, the Spider extracts data and urls and sends them
to the Scrapy Engine, which then transfers the URL
received to the Scheduler scheduler. The Scheduler
scheduler stores requests from the Scrapy Engine and sorts
them and sends them back to the Scrapy Engine, After the
Downloader downloads custom data and sets proxy, it
returns to Scrapy Engine. Scrapy Engine receives the result
and returns it to crawler Spider, which then parses and
processes Html data. The parsed data ofcrawler Spider will
be sent back to Scrapy Engine. Finally, Scrapy Engine
receives the field data, stores it through the Item Pipeline,
and sends the request to the Scheduler!", See Fig. 3 below.
282Figure 3. Operation flowchart of Scrapy framework
TABLE 1. COMPONENT EXPLANATION TABLE OFSCRAPY FRAMEWORK
Name Explain
Scrapy Engine Engine, data transmission
Scheduler Scheduler, which holds the request queue
DownloaderDownloader, download request
information
Spider Crawler, extract data and URL
Item Pipeline Pipes, storing and transmitting data
Downloader Download themiddleware and set the IP
Middlewares proxy
Spider MiddlewaresMiddleware, custom HTTP requestsSpider
The implementation ofScrapy crawler framework IS
divided into five basic steps. Firstly, Scrapy startproject +
projectname (projectname) is used to create the project, and
then fields are clarified tospecify the target fields to be
crawled, and items.py file is written to make crawler. Write
spider.py file for web crawling and store data after crawling.
Design Item Pipeline to store the crawled data and write
pipeline. py. Finally, run scrapy crawl search-s
JOBDIR=crawls/search to start the entire Scrapy projectl'!
As shown in Table I.
2)Anti-reptile technology
Due to the widespread useofweb crawler technology,
some criminals will use crawler technology to steal data on
some websites, resulting in the loss ofbenefits ofsome
companies. In addition, due to the rapid development of
crawler technology, thenumber ofrequests that can be
reached every second can be hundreds ofvisits to the
website, and such high frequency visits to the website will
lead to the direct collapse ofthe server. Users cannot access
the site, limiting the use ofIP leads to crawlers can not
continue, users can not obtain thedesired datal".
Inorder toprevent theinvasion ofcrawler software,
some websites will add a lot ofidentity identification
methods toanalyze theidentity information provided by the
User to visit the website, user-agent and Cookie
information, when the same IP information repeatedly visits
Authorized licensed use limited to: University of Shanghai For Science and Technology. Downloaded on November 18,2024 at 10:07:18 UTC from IEEE Xplore.  Restrictions apply. 
WKH ZHEVLWH LW ZLOO EH FRQVLGHUHG E\ WKH ZHEVLWH WKDW WKH
FUDZOHUSURJUDPUHVWULFWVDFFHVV
7LNWRN LV DOVR HTXLSSHG ZLWK DQ DQWLFUDZOHU SURJUDP
ZKLFK ZLOO EH WHUPLQDWHG ZKHQ LW UHFRJQL]HV WKH VDPH ,3
DGGUHVV DQG YLVLWV WKH ZHEVLWH IUHTXHQWO\ 7KHUHIRUH ZH
QHHG WR GLVJXLVH WKH FRPPHQWV GDWD RI 7LNWRN KRW VHDUFK
WKURXJK WKH SURJUDP 6HWWLQJV VR DV WR DYRLG UHVWULFWLRQV RQ
XV DIWHU EHLQJ LGHQWLILHG E\ 7LNWRN
V DQWLFUDZOHU SURJUDP
7KHIROORZLQJPHWKRGVFDQEHXVHGIRUFDPRXIODJH
D8VH GLIIHUHQW FRPSXWHUV DQG DFFRXQWV WR FOLPE
'RX\LQDWWKH VDPH WLPH DQGOLPLW WKH VSHHGDQGQXPEHU RI
FOLPELQJIRUHDFKDFFRXQW
E5HGXFH WKH FUDZOLQJ VSHHG DQG VHW D 6OHHS WLPH IRU
WKH SURJUDP HYHU\ WLPH LW FOLPEV IRU D SHULRG RI WLPH VR
WKDWWKHSURJUDPFDQFRQWLQXHGDWDDFTXLVLWLRQDIWHUDSHULRG
RIWLPH
F0RGLI\ WKH 8VHU$JHQW DQG &RRNLH LQIRUPDWLRQ LQ
+HDGHUVWRGLVJXLVHWKHLGHQWLW\WKURXJKWKH,3SUR[\SRRO
7KLV SDSHU DGRSWV WKH WKLUG ZD\ WR REWDLQ WKH GDWD RI
'RX\LQKRWVHDUFKFRPPHQWV
% 'DWD3UHSURFHVVLQJ7HFKQRORJ\
'DWD SUHSURFHVVLQJ WHFKQRORJ\ UHIHUV WR FOHDQLQJ WKH
XQZDQWHG SDUW RI GDWD DIWHU GDWD DFTXLVLWLRQ DQG FRQYHUWLQJ
WKHGHVLUHGSDUWLQWRWKHGHVLUHGGDWDIRUPDW
7KH FUDZOHU SURJUDP ZLOO REWDLQ WKH +70/ LQIRUPDWLRQ
RIWKHZHESDJHDQGWKHKRWVHDUFKFRPPHQWGDWDZHZDQWLV
LQ WKH ZHESDJH LQIRUPDWLRQ :H QHHG WR VHOHFW WKH +70/
LQIRUPDWLRQ WKURXJK ;SDWK WHFKQRORJ\ LQGH[ WKH GDWD XQGHU
WKH WDJ GLY ZH ZDQW DQG FOHDQ VRPH GDWD ZH GR QRW QHHG
DIWHUREWDLQLQJWKHGDWD
2QO\ DIWHU GDWD LV SUHSURFHVVHG FDQ ZH JHW WKH GDWD ZH
ZDQW DQG RQO\DIWHUVXFK GDWDLV EURXJKW LQWRWKH PRGHODQG
DOJRULWKP YHULILFDWLRQ FDQ ZH JHW WKH H[SHFWHG UHVXOWV ZH
ZDQW
& &KLQHVH :RUG 6HJPHQWDWLRQ 7HFKQRORJ\
:RUG VHJPHQWDWLRQ WHFKQRORJ\ RULJLQDWHG HDUOLHU LQ
IRUHLJQ FRXQWULHV DQG (QJOLVK ZRUG VHJPHQWDWLRQ
WHFKQRORJ\ ZDV WKH ILUVW WR GHYHORS 7KH FRPSRVLWLRQ RI
(QJOLVKLVVLPSOHWKHJUDPPDUDQGORJLFDUHVLPSOHDQGWKH
ZRUG LV WDNHQ DV WKH XQLW WR IR UP VHQWHQFHV +RZHYHU WKH
GLIILFXOW\ RI &KLQHVH ZRUG VHJPHQWDWLRQ LV PXFK JUHDWHU
WKDQWKDWRI(QJOLVKZRUGVHJPHQWDWLRQDQGWKHFRPSRVLWLRQ
ORJLF RI &KLQHVH DQG (QJOLVK LV DOVR YHU\ GLIIHUHQW
7KHUHIRUH &KLQHVH ZRUG VHJPHQWDWLRQ WHFKQRORJ\ LV
GLIIHUHQWIURP(QJOLVKZRUGVHJPHQWDWLRQWHFKQRORJ\
-LHEDZRUGVHJPHQWDWLRQWHFKQRORJ\LVDFRPPRQO\XVHG
&KLQHVH ZRUG VHJPHQWDWLRQ WHFKQRORJ\ DQG WKHUH LV D
WKLUGSDUW\ OLEUDU\ RI -LHED ZRUG VHJPHQWDWLRQ LQ 3\WKRQ
(DV\ WR XVH LV WKH GHYHORSHU RI &KLQHVH ZRUG VHJPHQWDWLRQ
WHFKQRORJ\FKRLFH
-LHED ZRUG VHJPHQWDWLRQ FRPELQHV WKH VWULQJ PDWFKLQJ
DOJRULWKP DQG VWDWLVWLFDO PRGHO ZRUG VHJPHQWDWLRQ LGHD ,Q
IDFW WKH VWULQJ PDWFKLQJ DOJRULWKP PDWFKHV WKH VWULQJ ZLWK
WKH NH\ZRUG LQ D GLFWLRQDU\ DQG WKH MLHED ZRUG LV PDWFKHG
ZLWK WKH GLFWLRQDU\ ,I WKH ZRUG LV IRXQG LQ WKH PDFKLQH
GLFWLRQDU\ WKH MLHED ZRUG VHJPHQWDWLRQ LV SHUIRUPHG 7KH
LGHDRI ZRUG VHJPHQWDWLRQ LQ VWDWLVWLFDO PRGHOLV WR FRQVLGHUWKH IUHTXHQF\ RI ZRUGV WKDW FDQ EH IRUPHG EHWZHHQ HDFK
ZRUG ,I LW LV IRXQG WKDW WZR ZRUGV LQ D VHQWHQFH FDQ IRUP D
ZRUG LQ D ODUJH QXPEHU RI IUHTXHQF\ LW LV FRQVLGHUHG WKDW
WKHVHWZRZRUGVIRUPDZRUG
-LHED VHJPHQWDWLRQ DOVR VWRUHV WKH GDWDEDVH RI FRPPRQ
MLHED ZRUGV VXFK DV ]KL KH QL PR ZH DQG VR
ZKLFK KDYH QR JUHDW SUDFWLFDO PHDQLQJ %\ UHPRYLQJ WKHVH
ZRUGV IURP WKH VHQWHQFH E\ MLHED VHJPHQWDWLRQ PHWKRG QRW
RQO\ FDQ WKH DOJRULWKP EH DFFHOHUDWHG EXW DOVR WKH NH\ZRUG
GHQVLW\ FDQ EH LPSURYHG WR PDNH WKH VHJPHQWDWLRQ PRUH
DFFXUDWH 7KH IROORZLQJ )LJ  7KH ZKROH SURFHVV RI -LHED
VHJPHQWDWLRQ
J
)LJXUH)ORZFKDUWRI-LHEDZRUGVHJPHQWDWLRQ
,,, 1/3 1$785$/ /$1*8$*( 352&(66,1* $/*25,7+0
1/3 1DWXUDO /DQJXDJH 3URFHVVLQJ LV DQ LPSRUWDQW
UHVHDUFK GLUHFWLRQ LQ WKH ILHOG RI DUWLILFLDO LQWHOOLJHQFH ,W
PDLQO\ SURFHVVHV DQG DQDO\]HV KXPDQ QDWXUDO ODQJXDJH
1/3 DOJRULWKP LV PDLQO\ XVHG LQ PDFKLQH WUDQVODWLRQ
&KLQHVH 2&5 WH[W FODVVLILFDWLRQ VSHHFK UHFRJQLWLRQ
VHQWLPHQWDQDO\VLVDQGVRRQ
' 7),') $OJRULWKP
7ILGI DOJRULWKP ZKHUH 7) VWDQGV IRU ZRUG IUHTXHQF\
,')VWDQGVIRULQYHUVHGRFXPHQWIUHTXHQF\LWLVDZHLJKWLQJ
WHFKQRORJ\ 7KH DOJRULWKP WDN HV WKH IUHTXHQF\ RI D ZRUG LQ
D VHQWHQFH DV DQ HYDOXDWLRQ LQGH[ WR MXGJH WKH GLIILFXOW\ RI
WKH LPSRUWDQW SODQQLQJ RI WKH ZRUG ,I WKH ZRUG DSSHDUV
PRUH IUHTXHQWO\ LQ WKLV FRUSXV EXW QRW VLJQLILFDQWO\ LQ RWKHU
FRUSXV LW LV FRQVLGHUHG WKDW WKH ZRUG LV YHU\ LPSRUWDQW LQ
WKLV FRUSXV 2I FRXUVH ZRUGV ZLWK KLJK IUHTXHQF\ LQ WKLV
FRUSXV DQG RWKHU FRUSXV VXFK DV RI ZH DQG VR ZLOO
DOVRDSSHDULQWKLVFRUSXV7KL VNLQGRIZRUGVZLOOWKLQN WKDW
WKH LPSRUWDQFH RI WKHVH ZRUGV LV QRW KLJK LQ WKLV FRUSXV
7),') DOJRULWKP KDV WKH DGYDQWDJHV RI VLPSOH DQG HDV\ WR
XQGHUVWDQGIDVWUXQQLQJVSHHGDQGVWURQJILOWHULQJDELOLW\
7KHZRUGIUHTXHQF\7)IRUPXOD LQWKH7),'IDOJRULWKP
LVDVIROORZV
283thefrequency o fwords that ca nbefonnedbetween eac h
word .Ifit isfound that two wor dsina sentence can fo rma
wordinalarge numb eroffrequency, it i sconsidered that
these two w ords f orm a word.
Jieba se gmentation alsostores th e database ofcommon
jieba wo rds, such as "zhi","he","ni","mo", "we" a nd"so",
which h aveno grea t practical meaning .Byremoving these
words from th e sentence b yjieba segme ntation m ethod, not
onlycan the algorithm b e acce lerated ,butalso th ekeyword
density can beimpr oved tomake the seg mentation m ore
accurate. Th efollowing Fig .4The whole pro cess ofJieba
segme ntation .the we bsite, it will b e co nsidered bythe we bsite th atthe
craw ler pro gram restrict saccess .
Tiktok is alsoequipped withananti-craw ler pro gram ,
which will betermin ated w hen it r ecognizes the same IP
address andvisits th e we bsite frequently .Therefore, we
need to disguise th e co mments dataofTiktokhotsearch
through theprogram Se ttings ,so as to avo id restrictions o n
us after be ing i dentifi ed byTiktok's a nti-craw ler p rogram .
The following m ethods ca n be use dfor ca mouflage :
a)Use different co mputers and acco unts t oclimb
Douyin a t the same tim e, and limit t hespee dand num berof
climbing f or eac haccou nt.
b)Reduce th e craw ling speed, andsetaSleep timefor
theprogram every time itclimbs f or a period oftime, so
thattheprogram cancontinu e dataacquisition after a period
oftime.
c)Modity the User-Ag ent a ndCookie information in
Headers todisguise the id entity through the IP proxy pool.
Thispaper adopt sthethird way to obtain the d ataof
Douyin hot search comm ents.
B.Data Preprocessing Techno logy
Datapreprocessing technology refers tocleaning the
unwanted part o f data after data acq uisition, andconvert ing
the des ired p artintothedesired da ta format,
Thecrawler program w illobtain th eHTMLinformation
ofthe we bpage, and th ehot searc hcomment d ata we wa ntis
in th e we bpage information, We needto select th eHTML
inform ation through X path t echnology, indexthedata u nder
thetag d ivwe wa nt,and cl ean so medatawedonotneed
afterobtaining th e data.
Onlyafterdata ispreprocessed ca nwe ge t the datawe
want,andonlyafter su chdata is bro ught int othemodel a nd
algorithm verification canwe get t heexpected r esults we
want.III.Figure 4.FlowchartofJieha word se gmentat ion
NLPNATURAL LANGUAGE PROCESS ING ALGOR ITHM
C.Chinese W ord Segme ntation T echnology
Word segmentati ontechnology originated earlier in
foreign countries, and En glish w ord segmentat ion
technology was the first t odevelop. The composition of
English is simple, the gr ammar a nd logic are simple, and th e
word istaken as the unit t oform se ntences. Howev er,the
difficulty ofChine se wo rdsegmentation is much greater
thanthat of Engli sh wor dsegmentation, and the c omposition
logic ofChinese and English is a lso very different.
Therefore, C hinese wordsegmentation t echnology is
different fromEnglish wor dsegmentation t echnology.
Jieba wo rdsegmentatio n t echnology is a co mmonly u sed
Chinese wordsegmentation t echnology, a nd th ere is a
third-party libra ryofJieba word seg mentation in P ython.
Easy touse,isthedeveloper ofChinese wordsegmentation
technology c hoice.
Jieba wo rdsegme ntation combines th e string m atching
algorithm andstatistical m odel word segme ntation id ea.In
fact,the string m atching a lgorithm m atches the string with
thekeyword inadictionary, a ndthejieba word ismatched
with th e dic tionary. I fthe wor d is found in themachine
dictionary, thejiebawordsegmentation i sperformed .The
idea ofwordsegmentation instatistica l m odel isto consider
283NLP (Natur al La nguage Processing) is animportant
resear chdirection in th e fie ldofartificial intell igence. It
mainly processes andanalyzes hum annatural language .
NLP a lgorithm is ma inly use d in machine transl ation,
Chinese OCR, text cl assific ation ,speech recognit ion,
sentiment analysis andso on.
D.TF-IDF Algorithm
Tf-idfalgorithm, where TF stands forwordfrequency,
lDF stands f orinverse doc ument frequency, it i saweig hting
technology. The algorithm t akes the fre quency ofaword in
a sentence as anevaluation index t ojudgethedifficulty of
the important pl annin gofthe wo rd.Ifthe wo rdappears
morefrequ ently in thi s corp us,but n ot significantly inother
corpus, it i s considered th atthe wo rd isvery important i n
this corpus. Ofcourse, wor dswith hi ghfrequenc yin th is
corpus and oth er co rpus,suchas"of', "we" and "so", w ill
alsoappear in thi s corpus. Thi skindofwordswillthink that
the imp ortance o f these words isnothighin thi s co rpus.
TF-lDF algorithm h asthe adva ntages ofsimple andeasy to
understand, fastnmnin g spee dandstrong filt ering a bility .
Theword fr equency TF formula in theTF-IDf algorithm
is as follows :
Authorized licensed use limited to: University of Shanghai For Science and Technology. Downloaded on November 18,2024 at 10:07:18 UTC from IEEE Xplore.  Restrictions apply. 
/g1846/g1832/g3404/g1866 /g1827 
:KHUH $ UHSUHVHQWV $ FHUWDLQ ZRUG Q UHSUHVHQWV WKH
QXPEHURIWLPHVDQGQ$UHSUHVHQWVWKHQXPEHURIWLPHVRI
DFHUWDLQZRUGLQWKLVFRUSXV
6LQFH WKH OHQJWK RI GLVFRXUVH LV GLIIHUHQW 7) FDQ EH
VWDQGDUGL]HGDQGWKHIRUPXODLVDVIROORZV
/g1846/g1832/g3404/g1866/g4666/g1827/g4667
/g1866/g1828
:KHUH Q% UHSUHVHQWV WKH WRWDO QXPEHU RI ZRUGV LQ WKH
FRUSXV
,') LQYHUVH GRFXPHQW IUHTXHQF\ DOVR NQRZQ DV LQYHUVH
GRFXPHQW IUHTXHQF\ LV WKH UHFLSURFDO RI WKH GRFXPHQW
IUHTXHQF\7KHIRUPXODLVDVIROORZV
/g1835/g1830/g1832/g3404log/g1866/g4666/g1827/g4667
/g1866/g1828/g33971
:KHUH Q$ LV WKH WRWDO QXPEHU RI FRUSXV GRFXPHQWV
DQGQ%LVWKHQXPEHURIGRFXPHQWVFRQWDLQLQJWKHZRUG
7KHIRUPXODRI7),')LVDVIROORZV
/g1846/g1832/g3398/g1835/g1830/g1832/g3404/g1846/g1832â/g1835/g1830/g1832 
$FFRUGLQJ WR WKH IRUPXOD RI W),'I LW FDQ EH VHHQ WKDW
ZKHQ WKH IUHTXHQF\ RI D ZRUG LQ D FHUWDLQ FRUSXV LV KLJK
WKDW LV ZKHQ 7) LV ODUJH DQG WKH QXPEHU RI GRFXPHQWV
FRQWDLQLQJ WKH ZRUG LV VPDOO WKDW LV ZKHQ WKH IUHTXHQF\ RI
,') LQYHUVH GRFXPHQW LV KLJK WKH ODUJHU WI,'I LV DQG WKH
KLJKHUWKHLPSRUWDQFHRIWKHZRUGLV
( 7H[W6HQWLPHQW$QDO\VLV0RGHO
0DQ\XVHUVZLOO FRPPHQW RQHDFK KRW VHDUFKLQ 'RX\LQ
DQG WKH RQOLQH SXEOLF RSLQLRQ ZLOO GHYHORS DORQJ ZLWK WKH
FRPPHQWV RI WKHVH XVHUV 6RPH XVHUV ZLOO OHDYH VRPH
QHJDWLYH FRPPHQWV ZKLFK ZLOO PLVOHDG VRPH XVHUV WR
IROORZWKH WUHQGDQGPDNH QHJDWLYHFRPPHQWV7KHUHIRUHLQ
RUGHU WR JUDVS WKH RQOLQH SXEOLF RSLQLRQ RI 'RX\LQ KRW
VHDUFKZH QHHG WRJUDVS WKHHPRWLRQDOLQIRUPDWLRQ RIXVHUV
FRPPHQWV6HQWLPHQWDQDO\VLVRIXVHUFRPPHQWVLVQHHGHG
 2YHUYLHZ RIWH[W VHQWLPHQW DQDO\VLV
6HQWLPHQW$QDO\VLV LV DQLPSRUWDQW UHVHDUFK GLUHFWLRQLQ
1/3 DOJRULWKPV DQG DQ LPSRUWDQW WHFKQRORJ\ IRU HPRWLRQ
UHFRJQLWLRQ *HQHUDO WH[W HPRWLRQ DQDO\VLV PDLQO\ FODVVLILHV
D SDUDJUDSK RIWH[W RU D VHQWHQFH RU D ZRUG DQG GHWHUPLQHV
ZKHWKHU WKH HPRWLRQ FRORU EHORQJV WR SRVLWLYH RU QHJDWLYH
2I FRXUVH WKHUH DUH DOVR VRPH HPRWLRQ DQDO\VLV DOJRULWKPV
WRFODVVLI\WKHDQDO\VLVUHVXOWVLQFOXGLQJKDSSLQHVVVDGQHVV
DQJHU VXUSULVH DQG VR RQ 7KLV SDSHU PDLQO\ VWXGLHV WKH
SXEOLF RSLQLRQ RULHQWDWLRQ RI KRW VHDUFK FRPPHQWV RQ
'RX\LQ VR WKH UHVXOWV RI HPRWLRQ DQDO\VLV DUH GLYLGHG LQWR
SRVLWLYHSXEOLFRSLQLRQDQGQHJDWLYHSXEOLFRSLQLRQ
7H[W VHQWLPHQW DQDO\VLV ILUVW UHTXLUHV ZRUG VWRSSLQJ
FXVWRP GLFWLRQDU\ DQG ZRUG VHJPHQWDWLRQ RI WKH RULJLQDO
WH[W 7KHVH RSHUDWLRQV FDQ EH FRPSOHWHG E\ -LHED ZRUG
VHJPHQWDWLRQ WHFKQRORJ\ DQG WKH SUHSURFHVVHG WH[W QHHGV
WR EH GLYLGHG LQWR WUDLQLQJ VHW DQG WHVW VHW 7UDLQLQJ VHW LQ
WKH WUDLQLQJ VHW WR H[WUDFW FRUSXV LQIRUPDWLRQ 7),')
DOJRULWKP FDQ EH XVHG WR H[WUDFW FRUSXV LQIRUPDWLRQ DQGWKHQ HPRWLRQH[WUDFWLRQFODVVLILFDWLRQUHWULHYDO>@7 K HI O R Z
FKDUWRIWH[WVHQWLPHQWDQDO\VLVLVVKRZQLQ)LJEHORZ
)LJXUH)ORZFKDUWRIWH[WVHQWLPHQWDQDO\VLV
 6QRZ1/3 HPRWLRQDQDO\VLV
6QRZ1/3 LV D WKLUGSDUW\ OLEUDU\ LQ 3\WKRQ WKDW KDV LWV
RULJLQV LQ 7H[W%ORE 7KH 3\WKRQ WKLUGSDUW\ OLEUDULHV
6QRZ1/3 -LHED %RVRQ1/3 DUH DOO IRU &KLQHVH ODQJXDJH
SURFHVVLQJ 7KH PDLQ IXQFWLRQV RI 6QRZ1/3 LQFOXGH
&KLQHVH ZRUG VHJPHQWDWLRQ SDUWRI VSHHFK WDJJLQJ
VHQWLPHQW DQDO\VLV WH[W FODVVLILFDWLRQ SLQ\LQ FRQYHUVLRQ
WH[W NH\ZRUGV H[WUDFWLRQ DEVWUDFW H[WUDFWLRQ WH[W VLPLODULW\
FDOFXODWLRQ HWF 7KH 6QRZ1/3 OLEUDU\ FRPHV ZLWK D VHW RI
SRVLWLYH DQG QHJDWLYH HPRWLRQDO WUDLQLQJ ZLWK WUDLQHG
PRGHOVUHDG\IRULPPHGLDWHXVH
7KH SULQFLSOH RI 6QRZ1/3
V HPRWLRQDO SUHGLFWLRQ RI
'RX\LQKRWVHDUFKFRPPHQWVLVDVIROORZV
'RX\LQ KRW VHDUFK FRPPHQWV DUH GLYLGHG LQWR SRVLWLYH
FRPPHQWV $ DQG QHJDWLYH FRPPHQWV $ (DFK FRPPHQW
KDV D WRWDO RI Q ZRUGV /g2158/g2778,/g2158/g2779,â¯/g1801/g1814/g1804/g2158 /g21967 K HQ D L Y H% D \ H V
IRUPXODLVDVIROORZV
/g1842/g18271/g18281,â¯,/g1828/g1866/g3404/g1842/g4666/g18281,â¯,/g1828/g1866|/g18271/g4667â/g1842/g4666/g18271/g4667
/g1842/g4666/g18281,â¯,/g1828/g1866/g4667
:KHUH WKH SUREDELOLW\ WKDW D FRPPHQW FRPSRVHG RI
/g2158/g2778,/g2158/g2779,â¯,/g2158/g2196ZRUGVLVSRVLWLYHFRPPHQW$LVHTXDOWRWKH
SUREDELOLW\ WKDW WKH FRPPHQW KDV /g2158/g2778,/g2158/g2779,â¯,/g2158/g2196ZRUGV LI
WKH FRPPHQW LV SRVLWLYH FRPPHQW $ WLPHV WKH SUREDELOLW\
WKDW WKH FRPPHQW LV SRVLWLYH FRPPHQW $ GLYLGHG E\ WKH
SUREDELOLW\WKDWWKHFRPPHQWKDV /g2158/g2778,/g2158/g2779,â¯,/g2158/g2196ZRUGV
0HDQZKLOHWKHIXOOSUREDELOLW\IRUPXODLVDVIROORZV
/g1842/g1828/g3404/g1842/g1828/g1827â/g1842/g1827/g3397/g1842/g1828/g1827'â/g1842/g1827'
)RUPXOD  FDQ EH REWDLQHG DFFRUGLQJ WR WKH IXOO
SUREDELOLW\IRUPXOD
/g1842/g18281,â¯,/g1828/g1866/g3404/g1842/g18281,â¯,/g1828/g1866/g18271â/g1842/g18271/g3397
/g1842/g18281,â¯,/g1828/g1866/g18272â/g1842/g18272 
7KDW LV WKH FRPPHQW KDV WKH ZRUG /g18281,â¯,/g1828/g1866
SUREDELOLW\  LI WKH FRPPHQW LV SRVLWLYH FRPPHQW /g18271W K H Q
WKH FRPPHQW KDV WKH ZRUG /g18281,â¯,/g1828/g1866SUREDELOLW\ WLPHV WKH
FRPPHQW LV SRVLWLYH FRPPHQW /g18271 SOXV LI WKH FRPPHQW LV
QHJDWLYH FRPPHQW /g18272 WKHQ WKH FRPPHQW KDV WKH ZRUG
/g18281,â¯,/g1828/g1866SUREDELOLW\ 7KH SURGXFW RI WKH SUREDELOLW\ WKDW
WKH FRPPHQW LV D SRVLWLYH FRPPHQW /g18271) R U P X O D  F D Q
WKHQEHFRQYHUWHGLQWR)RUPXODDVIROORZV
284Where A represents A certain word, nO represents the
number oftimes, and n(A) represents the number oftimes of
a certain word in this corpus.
Since the length ofdiscourse is different, TF can be
standardized, and the formula is as follows:
Where nCB) represents the total number ofwords in the
corpus.
IDF inverse document frequency, also known as inverse
document frequency, is the reciprocal ofthe document
frequency. The formula is as follows:
(5)peA IB ...B)=P(Bl,"',B nIAl)'P(Al)
1 V ,n P(Bl,"',Bn)
Formula 3-7 can be obtained according to the full
probability formula:PCB) =P(BIA) .peA)+p(BIA') .peA') (6)then emotion extraction, classification, retrievall-l, The flow
chart oftextsentiment analysis is shown in Fig. 5 below:l:: -vJ--
2)SnowNLP emotion analysis
SnowNLP is a third-party library in Python that has its
origins in TextBlob. The Python third-party libraries
SnowNLP, Jieba, BosonNLP are all for Chinese language
processing. The main functions ofSnowNLP include
Chinese word segmentation, partof speech tagging,
sentiment analysis, text classification, pinyin conversion,
text keywords extraction, abstract extraction, text similarity
calculation, etc. The SnowNLP library comes with a set of
positive and negative emotional training, with trained
models ready for immediate use.
The principle ofSnowNLP's emotional prediction of
Douyin hotsearch comments is as follows:
Douyin hot search comments are divided into positive
comments Aland negative comments A2. Each comment
has a total ofn words: BvBz,..-and Bn.The naive Bayes
formula is as follows:
P(B1,"',Bn)=P(Bv"',BnIA 1).P(A1)+
P(B 1,"',BnlA z).P(Az) (7)Figure 5. Flow chart of text sentiment analysis
That is, the comment has the word B1,"',Bn
probability =ifthe comment is positive comment A1,then
the comment has the word B1,"',Bnprobability times the
comment is positive comment A1,plus ifthe comment is
negative comment Az,then the comment has the word
B1,"',B; probability. The product ofthe probability that
the comment is a positive comment A1.Formula 3-5 can
then be converted into Formula 3-8, as follows:Where the probability that a comment composed of
BvBz,"',Bnwords is positive comment Al is equal to the
probability that the comment has BvBz,"',Bnwords if
the comment is positive comment Al times the probability
that the comment is positive comment AI, divided by the
probability that the comment has BvBz,"',Bnwords.
Meanwhile, the full probability formula is as follows:(3)(1)
(4)(2)TF=neAl
nCB)TF=n(A)
TF-IDF =TFÂ·IDFIDF =logC;;~J
Where, n(A) is the total number ofcorpus documents,
andnCB) is the number ofdocuments containing the word.
The formula ofTF-IDF is as follows:
According to the formula oftF-IDf, it can be seen that
when the frequency ofa word in a certain corpus is high,
that is, when TF is large, and the number ofdocuments
containing the word is small, that is, when the frequency of
IDF inverse document is high, the larger tf-IDf is and the
higher the importance ofthe word is.
E. Text Sentiment Analysis Model
Many users will comment on each hot search in Douyin,
and the online public opinion will develop along with the
comments ofthese users. Some users will leave some
negative comments, which will mislead some users to
follow the trend and make negative comments. Therefore, in
order to grasp the online public opinion ofDouyin hot
search, we need to grasp the emotional information ofusers'
comments. Sentiment analysis ofuser comments is needed.
1)Overview oftextsentiment analysis
Sentiment Analysis is an important research direction in
NLP algorithms and an important technology for emotion
recognition. General text emotion analysis mainly classifies
aparagraph oftext or a sentence or a word, and determines
whether the emotion color belongs to positive or negative.
Ofcourse, there are also some emotion analysis algorithms
to classify the analysis results, including happiness, sadness,
anger, surprise and so on. This paper mainly studies the
public opinion orientation ofhot search comments on
Douyin, so the results ofemotion analysis are divided into
positive public opinion and negative public opinion.
Text sentiment analysis first requires word stopping,
custom dictionary, and word segmentation ofthe original
text. These operations can be completed by Jieba word
segmentation technology, and the pre-processed text needs
to be divided into training set and test set. Training set, in
the training set to extract corpus information, TF-IDF
algorithm can be used to extract corpus information, and
284
Authorized licensed use limited to: University of Shanghai For Science and Technology. Downloaded on November 18,2024 at 10:07:18 UTC from IEEE Xplore.  Restrictions apply. 
/g1842/g18271/g18281,â¯,/g1828/g1866/g3404/g1842/g4666/g18281,â¯,/g1828/g1866|/g18271/g4667â/g1842/g4666/g18271/g4667
/g1842/g18281,â¯,/g1828/g1866/g18271â/g1842 /g18271/g3397/g1842/g18281,â¯,/g1828/g1866/g18272â/g1842 /g18272

(TXDWLRQ  LV WKH EDVLF IRUPXOD XVHG LQ 6QRZ1/3
HPRWLRQ SUHGLFWLRQ 7KH GHQRPLQDWRU DQG QXPHUDWRU FDQ EH
GLYLGHG E\ D QXPHUDWRU DW WKH VDPH WLPH ZKLFK FDQ EH
VLPSOLILHGLQWRDVIROORZV
/g1842/g18271/g18281,â¯,/g1828/g1866
/g3404/g1842/g18281,â¯,/g1828/g1866/g18271â/g1842/g18271
/g1842/g18281,â¯,/g1828/g1866/g18271â/g1842/g18271/g3397/g1842/g18281,â¯,/g1828/g1866/g18272â/g1842/g18272
/g34041
1/g3397/g1842/g18281,â¯,/g1828/g1866/g18272â/g1842/g18272
/g1842/g18281,â¯,/g1828/g1866/g18272â/g1842/g18271
/g34041
1/g3397explg/g1842/g18281,â¯,/g1828/g1866/g18272â/g1842/g18272
/g1842/g18281,â¯,/g1828/g1866/g18271â/g1842/g18271
/g34041
1/g3397exp lg /g1842/g18281,â¯,/g1828/g1866/g18272â/g1842 /g18272/g3398lg /g1842/g18281,â¯,/g1828/g1866/g18271â/g1842 /g18271
:HKDYHD LQ WKHGHQRPLQDWRUDQG ZHFDQUHZULWHLWDV

1/g3404
exp lg /g1842 /g1828 1,â¯,/g1828/g1866/g18271â/g1842/g18271/g3398lg/g1842/g1828 1,â¯,/g1828/g1866/g18271â
/g1842/g18271 
7KH VWHSV RI 6QRZ1/3 VHQWLPHQW DQDO\VLV DUH VKRZQ LQ
)LJEHORZ
)LJXUH6QRZ1/3HPRWLRQDQDO\VLVIORZFKDUW
)LUVWO\ WKH -LHED ZRUG VHJPHQWDWLRQ WHFKQRORJ\ LV XVHG
WR FRQGXFW ZRUG VHJPHQWDWLRQDQG SDUWRI VSHHFK WDJJLQJ IRU
'RX\LQ KRW VHDUFK FRPPHQWV WKHQ WKH HPRWLRQ ZRUGV
REWDLQHG IURP WKH WH[W GDWD DIWHU ZRUG VHJPHQWDWLRQ DQG
SDUWRI VSHHFK WDJJLQJ DUH H[WUDFWHG DQG WKH VHPDQWLF UXOHV
DUH PDWFKHG WKH HPRWLRQ PDWUL[ LV HVWDEOLVKHG DQG WKH
HPRWLRQ VFRUH LV FDOFXODWHG ZKLFK ZLOO EH VWDQGDUGL]HG WR
WKH LQWHUYDO  7KH FORVHU D VWDQGDUGL]HG VHQWLPHQW VFRUH
LV WR ]HUR WKH PRUH QHJDWLYH WKH VHQWLPHQW LV &RQYHUVHO\
WKH FORVHU WKH VHQWLPHQW VFRUH LV WR  WKH PRUH SRVLWLYH WKH
VHQWLPHQW LV 7KLV DOORZV D WKUHVKROG WR EH VHW
SURJUDPPDWLFDOO\ WR ILOWHU GHVLUHG HPRWLRQDO DWWLWXGHV 7KLVPHWKRG LV PRUH REMHFWLYH DQG IDVWHU WKDQ WKH RULJLQDO
DUWLILFLDOHPRWLRQDQDO\VLV>@
,9 ,03/(0(17$7,21 2) 1(7:25.38%/,&23,1,21
6<67(0
$ 'DWD $FTXLVLWLRQ
 &OLPE WKH +RW6HDUFK OLVW
)LUVWO\ HQWHU WKH KRW VHDUFK OLVW RI 'RX\LQ FDSWXUH WKH
LQWHUIDFH RI 'RX\LQ KRW VHDUFK OLVW E\ )LGGOHU DQG WKHQ
DQDO\]H WKH XUO FRPSRVLWLRQ RI WKH LQWHUIDFH DQG WKH
HQFU\SWLRQPRGHRISDUDPHWHUV)LJEHORZ
)LJXUH+RW6HDUFKOLVWGLVSOD\
1RWH7KH &KLQHVH FKDUDFWHUV LQ )LJXUH  DUH WKH WLWOH
QDPHVRIWKH7LN7RNKRWVHDUFKOLVW
7KHLQWHUIDFHUHWXUQUHVXOWLVVKRZQLQ)LJEHORZ
285Equation (8) is the basic formula used in SnowNLP
emotion prediction. The denominator and numerator can be
divided by a numerator at the same time, which can be
simplified into (9)as follows:
P(AIIB l'"',Bn)
P(Bl,"',BnlA l).peAl)
P(Bl,"',BnlA l).peAl) +P(Bv"',BnlA z).P(Az)
1
1
-1+exp {lg[p(B 1'"Â·,BnIAZ}P(Az)]-lg [p(BV'",BnIAl}p(Al)]} (9)
We have a Iin the denominator and we can rewrite it as
3-10
1=
exp(lg[P(B l,"',BnlA l).peAl)] - 19 [P(Bl' "',BnlA l).
peAl)]} (10)
The steps ofSnowNLP sentiment analysis are shown in
Fig. 6 below:
Figure 6. SnowNLP emotion analysis flow chart
Firstly, the Jieba word segmentation technology is used
to conduct word segmentation and partof speech tagging for
Douyin hot search comments, then the emotion words
obtained from the text data after word segmentation and
partof speech tagging are extracted, and the semantic rules
are matched, the emotion matrix is established, and the
emotion score is calculated, which will be standardized to
the interval (0,1). The closer a standardized sentiment score
is to zero, the more negative the sentiment is. Conversely,
the closer the sentiment score is to I, the more positive the
sentiment is. This allows a threshold to be set
programmatically to filter desired emotional attitudes. This
285method is more objective and faster than the original
artificial emotion analysisl'J,
IV. IMPLEMENTATION OFNETWORK PUBLIC OPINION
SYSTEM
A.Data Acquisition
1) Climb the Hot Search list
Firstly, enter the hot search list ofDouyin, capture the
interface ofDouyin hot search list by Fiddler, and then
analyze the urlcomposition ofthe interface and the
encryption mode ofarameters. Fi . 7below.
Figure 7. Hot Search list display
Note:The Chinese characters in Figure 7 are the title
names ofthe TikTok hot search list.
The interface return result is shown in Fig. 8 below.
Authorized licensed use limited to: University of Shanghai For Science and Technology. Downloaded on November 18,2024 at 10:07:18 UTC from IEEE Xplore.  Restrictions apply. 
)LJXUH'LVSOD\RILQWHUIDFHUHWXUQUHVXOWV
7KHWZRXUOLQWHUIDFHGLVSOD\VDUHVKRZQLQ)LJEHORZ
)LJXUH7ZRXUOLQWHUIDFHGLVSOD\V
&RPSDULQJ WKH XUO LQWHUIDFH WZLFH ZH FDQ VHH WKDW WKH
;%RJXVSDUDPHWHULQWKHXUOFKDQJHVHDFKWLPHVRZHQHHG
WRDQDO\]HKRZWKH;%RJXVSDUDPHWHUZDVJHQHUDWHGEHIRUH
ZH FDQ VROYH WKH DQWLFOLPE SUREOHP 7KURXJK DQDO\VLV LW LV
IRXQG WKDW WKH ;%RJXV SDUDPHWHU LV SDVVHG WKURXJK WKH -6
ILOH %HIRUH DFFHVVLQJ WKH LQWHUIDFH WKH VWULQJ EHIRUH WKH
;%RJXV SDUDPHWHU LQVLGH WKH LQWHUIDFH LVSDVVHG LQWR WKH -6
IXQFWLRQ 7KHQ DIWHU JHQHUDWLQJ WKH ;%RJXV SDUDPHWHU WKH
LQWHUIDFH FDQ EH FRUUHFWO\ DFFHVVHG ZLWK WKLV SDUDPHWHU )LJ
EHORZ
)LJXUH-6ILOHGLVSOD\
7KH JHQHUDWHG ;%RJXV SDUDPHWHU LV VKRZQ LQ )LJ 
EHORZ
)LJXUH;%RJXVJHQHUDWHGSDUDPHWHUGLVSOD\
7KHQ WKURXJK WKLV PHWKRG DFFHVV WKH KRW VHDUFK OLVW
LQWHUIDFH FOLPE RXW WKH WRS  OLVW QDPHV DQG OLVW YLGHR ,'
)LJ
)LJXUH'LVSOD\RIFUDZOUHVXOWV
1RWH7KH&KLQHVHLQ)LJXUHLVFUDZOLQJRXWWKHWRS
OLVWQDPHVRIWKHKRWVHDUFKOLVW&DOOYLGHR,'ZLWKOLVW
 &UDZO WKHFRPPHQWVDQG,3 DGGUHVVHVRIOLVW YLGHRV
)LUVWO\ WKHLQWHUIDFHXUORIWKHYLGHRFRPPHQWRQWKHOLVW
LV DQDO\]HG 7KURXJK WKH VWUXFWXUH RI WKH XUO ZH ILQG WKDW
WKH SDUDPHWHU DZHPHBLG LQ WKH XUO UHSUHVHQWV WKH DZHPHBLG
RI WKH YLGHR XQGHU WKH KRW VHDUFK OLVW EXW LW LV QRW WKH ,' RI
WKH KRW VHDUFK OLVW REWDLQHG LQ WKH ILUVW VWHS 7KHUHIRUH
LQWHUIDFH DQDO\VLV LV QHHGHG RQ KRZ DZHPHBLG LV REWDLQHG
7KH DQDO\VLV VKRZV WKDW ZKHQ FOLFNLQJ WKH KRW KDQG OLVW D
QHZ LQWHUIDFH ZLOO EHDFFHVVHG DQG WKH GDWDUHWXUQHG E\WKH
LQWHUIDFHFRQWDLQVWKHDZHPHBLGSDUDPHWHU)LJ
)LJXUH'LVSOD\RILQWHUIDFHUHVXOWV
2868Â·Â·wordjlst
I$J..0
!!....awemejnfos=(null)
iÂ·Â·Â·challeng ejd=
iÂ·Â·Â·Â·discussvideocount= 1
i...a~
iÂ·Â·Â·Â·event_time=0
iÂ·Â·hot_value=O
iÂ·Â·Â·Â·hotlist"param={"version":1}
iÂ·Â·Â·Â·label=O
iÂ·Â· Â·Â·related_words=(null)
iÂ·Â·Â·Â·sentence_id=1088423
iÂ·Â·Â·Â·sentence_tag=0
>.video_count=O
iÂ·Â·Â·Â·view_count=O
iÂ·Â·Â·word=~B@IJ1.*~271f*~"*8000:.$-f*
iÂ·Â·Â·Â·word_sub_board=(null)
i.,..word_tvpe=14
Figure 8. Display of interface return results
_The two url interface displays are shown in Fig. 9 below,
1httpsJ/www. douyin.conlavene/vl/ web/hotl searthl listf?devicepltforw=webapgla id=6383
Dchanmne l=chanmeI Jlc_webMdet alljisra18sou rce=6 p cchent .rypee -2version_code=17e4e
versioo_neme=17. 4.ebcokie _enable detrueksc ree n_wicth 19ckscreer_height=18eb rowserJlng
rage=zh- CNRb rouser _platforw ewin& 28browse rnamee-c hrcrelbo rowser ersron stoa.a.stz.i
02dbroiser conhn etruele ncmenane- Bli nldengine version l04,O.5112.102os name =windowsl
as ver slon-jcg co ucore_ nom -tzadev ice _menor =aB lplatfonePCldo wnlinkelOBeff ectivety
pe=agaro nd_trip_tlne=bueb id=7110159718885845 nsTokeren NteLatyw.etl- BE5F EB3CbU3
Anrbtophdk oitK -oIKk .PheHXS'rl6INLFxEuiS zWTn77z e5 5 eN 'SlTpAPN9 _6]ti49F99TuORc
jFcku_DJnHOoA = X-Bogus=DFS zSWLpU TANcDJtaPpRVXAIQ5B
2htt ps;/lwww .douYln.conlavene lvllWeb/hotisearth/llstndevice platJ om=rebapn laid=6 33.c
hanel=c hanme Lpc_ebdet allJ is ta18scurce =-b&pc_cllenL type= 28version_code= 1704sversio
n_name=17 .4.c& c.okie enab ledstruescree r_uidtheleBb screen _height= 12Bedorouse r Inguag
e=zh-CNlabro user .platfonEeiin32browser _name= -cnrc me sorowse-yersio nl 04.0 .112.1018
browse r_onlineatruelenginegnane= Bllniken gine v ersio n=l e4, .112.1c2os_name=llndoscos _v
ersion=lO& cpu _core_nume- 12de vlce menor -BB bplatf onm=PC &d ow mhnk- 12Beffecti vety
pe=garc und_tnp_tine=&buebide= 719121S971B 3BS6B4 ImsTokenrm Nt9 L31y.ct-BHSFB5Ck
bu3nmrbocopldkoNo l,ktPh eHKS r lL61NLF xEuiszNTn7ze5_5elSL TAPN9_6.Jti49F99Tu33
RClFcku_DJ nHOoA = - Bogu s=DFSz SwVl pUTAN cDjtaPpXKXAIQ5a
Figure 9. Two uri interface displays
Comparing the url interface twice, we can see that the
X-Bogus parameter in the urI changes each time, so we need
to analyze how the X-Bogus parameter was generated before
we can solve the anti-climb problem. Through analysis, it is
found that the X-Bogus parameter is passed through the JS
file. Before accessing the interface, the string before the
X-Bogus parameter inside the interface is passed into the JS
function. Then after generating the X-Bogus parameter, the
interface can be correctly accessed with this parameter Fig.
10 below.
286~
...._I.....â¢c.._."'.....,.......111&/'â¢â¢ {II_ " 1 " ' 1 ".......&"....1_ It/IlI .N'.".'. Ilh"".....1,..._/'
â¢...,tl_...a:J..I_l.o.llU ,r1tâ¢.â¢,
..... t1__'.JI> "UU ut" ZIl 1â¢â¢â¢1
...._,,.,. ..Â·' â¢â¢â¢ 1 ;
1. t '..... 1(..... . .,â¢â¢1]Â·Â·' . loI n._â¢â¢"...n'l._I._ ItÂ·tJ
â¢.....nnÂ·[]
â¢.â¢..-'Â·0;._tl _.f .l b.ll..t.....o..l ,.......uu~ ...........~U l(..
u...'._" â¢â¢Â·_ 11 â¢_',..-'.1 _ r.l 1â¢~_ l__.04_0 1:('_D' "lanu'''' '1â¢t_. 1_~....hSillM â¢...h1!J!iIII )â¢â¢â¢_)
1...t1_.','".oLll-"Z<lO ~.,.',Â»/"' 1Iâ¢â¢â¢~_.1__'~2""" .("'''''''''''' ._â¢â¢~._ ._IoJ_1 11Â·Â·.1
_tl_ .'Â·J_ '~ }I.. .1
h"'I_.'.::.l"l~ '!'".hU t""".-tat.,. â¢â¢~ .â¢"'1"''''â¢......., U:>dl>...... .ioOGU ...... ....bU<t â¢â¢baUIt ......
t l1_,.U '7J '(l (.â¢â¢J_.1_ ."~ '.I~â¢.O'.'l.....IH U I, â¢â¢â¢, _tl_.. .nÂ«ll l,.hj ...'S.,..lI..t..lIld< I (â¢â¢â¢â¢
_t1_ "'UO".~ II."...J;I,UdJ ;1I.â¢.â¢â¢â¢'."J'~lI>.,_ti_ :~ lf. ,.1Â·_'.:17""f._ U _ LA.sU U .1I.,.â¢â¢â¢â¢_U ._('__ '._â¢â¢JfHâ¢. â¢â¢1
Â·nu, _Â·_ tl _Â·I_t_ 1II...IT... .r,I _th"I'. _ ' 1_ ':.1rP""" .1_ r.j_.'_ H _ '......'_Â·1....;
1_ 1l __"'".Jlll(â¢â¢â¢J
_ 01_ _"1'<..,'_11(â¢.â¢)
,..Inr _11" (Â·1_Â· ,_"'lItt.. '-II..â¢ )â¢â¢â¢â¢Uf.". Â·.lltt..,.._ 'Â·[Â·IUÂ·]l.. Iâ¢â¢â¢ â¢Je.",J â¢n._
_ ".1[...._.."1Â·_..ut.uL_J 01 1 _ .."4 ''<u"â¢..,.
â¢_ â¢.1â¢-"'" 1 ...Id'â¢-â¢â¢In L S-.w dUoI â¢-â¢.".,â¢â¢<1 _ I_â¢â¢SoI" " !....',â¢-" 1 â¢
Figure 10. IS file display
The generated X-Bogus parameter is shown in Fig. II
below.
DFSzswSO BNXANa5 7taPO -7sNhy MV
Process finishedwithexitcode 0
Figure II.X-Bogus generated parameter display
Then through this method, access the hot search list
interface, climb out the top 10 list names and list video ID.
Fig. 12.
fld':'1088423' :name ':Â·i&!IHSI.~2711'!'lt1Sl.8000 $1'1")
fld"10877 54' , Â·nameÂ·'lllSl.ttft:k!j::J!I!i&~*;EÂ·)
fld':'l088161',Â·name" ;l;f.J "'''l-8 lEi1 xl':lM;;l;:JtMij,Â· }
fldÂ·'1087845Â·, Â·name Â·:<t>OOOOÂ±~ft;(j(;}/'0flil.:it 'l'j;'}
fld" 1088 161Â·,Â·name Â·:;l;f.J"' ''l-8 lEi1 xl':lM;;l;:JtMij,Â·)
fldÂ·:Â·108738T. Â·nameÂ·'Tnlf-foJ.lI:if~!'OOij1jMOO <t>1'1;l'1 ,~,nn
fidÂ·'1087393 Â·:nameÂ·'OO*~9J.~.Ijl.Â·}
fld" 1087 444 Â·.'nameÂ·'$'ri.llii H :fOOJl.!i$1lII +::'}
fld" 108 843T :name"ggJiI:idS:;Q;WCBA,~,)ff'l' '}
fld"1088370 ':name':'U20 OOlE.1~t3UOO'}
fldÂ·:'lD88185Â·, Â·nameÂ·:,.g,:Ff1;: ;lo1fU1.'!;;~M~~3<:* jj('}
Figure 12. Display of crawl results
Note:The Chinese in Figure 12 is crawling out the top 10
list names ofthe hot search list Call video ID with list.
2) Crawl the comments andIPaddresses oflistvideos
Firstly, the interface urI ofthe video comment on the list
is analyzed. Through the structure ofthe url, we find that
theparameter aweme_id in the urI represents the aweme_id
ofthe video under the hot search list, but it is not the ID of
the hot search list obtained in the first step. Therefore,
interface analysis is needed on how aweme_id is obtained.
The analysis shows that when clicking the hot hand list, a
new interface will be accessed, and the data returned by the
interface contains the aweme_id parameter. Fig. 13.
"~e__ 101
tec
::$1IUl!loriIl=:=;~Â·101:'8~1121U
:i~__ II!ooJ;l)'M& ~~3S"llI~
Ii~-~ _~~
: :~-~ _><'(If'< o(l
:if......,..
::r-dtrÂ·~!'3100
ii t""trolJV'!: -f ..."
i it::~;~~13]g
,,~-<i=Â·i:l:;IA*ft~hfljlll1Xttlt.*t:!I!M:!J:i."" :ft~=;n'li .*$ !I!-n1::;.l:.~ ~t~Â¢l:
::~l.b._ loo........." .~,i: ~<Ss~.
Figure 13. Display of interface results
Authorized licensed use limited to: University of Shanghai For Science and Technology. Downloaded on November 18,2024 at 10:07:18 UTC from IEEE Xplore.  Restrictions apply. 
$IWHU DQDO\]LQJ WKH XUO RI WKLV LQWHUIDFH LW LV IRXQG WKDW
WKHUH DUH WZR SDUDPHWHUV KRWZRUG DQG VHQWHQFHBLG ZKLFK
FRUUHVSRQG WRWKH OLVW QDPH DQG ,'REWDLQHG LQWKH ILUVWVWHS
DZHPHBLG LQ WKH XUO WR REWDLQ HDFK KRW YLGHR FRPPHQW LV
REWDLQHGE\LWVKRWVSRWQDPHDQG,')LJ)LJ
)LJXUHXUOGLVSOD\RIFRPPHQWLQWHUIDFH
)LJXUH,QWHUIDFHIRUREWDLQLQJDZHPHBLG
7KHQ WKH DZHPHBLG REWDLQHG FDQ EH XVHG WR DFFHVV WKH
HYDOXDWLRQ LQWHUIDFH DQG WKH FRPPHQWV DQG ,3 ORFDWLRQ RI
WKH YLGHR XQGHU WKH KRWVSRW FDQ EH REWDLQHG QRUPDOO\ )LJ
VKRZV
)LJXUH&RPPHQWVDQG,3KRPLQJGLVSOD\
)LQDOO\ WKLV PHWKRG VXFFHVVIXOO\ UHDOL]HV WKH FRPPHQWV
DQG,3ORFDWLRQGDWDFUDZOLQJRIKRWVHDUFKOLVWYLGHRV
 'DWDVWRUDJH
7KH FRPPHQW GDWD REWDLQHG LQ WKH VHFRQG VWHS LV VWRUHG
VHSDUDWHO\ (DFK KRW VHDUFK FRPPHQW LV VWRUHG VHSDUDWHO\
DQG WKH KRW VHDUFK QDPH LV XVHG DV WKH ILOH QDPH DQG VDYHG
DVD&69ILOH)LJ
)LJXUH'LVSOD\RIVWRUDJHUHVXOWV
1RWH7KH REWDLQHG FRPPHQW GDWD LQ )LJXUH  ZHUH
VWRUHG VHSDUDWHO\ DQG WKH KRW VHDUFK QDPH ZDV XVHG DV WKH
ILOHQDPHDQGVDYHGDVD&69ILOH
% 'DWD 3UHSURFHVVLQJ
'DWD REWDLQHG E\ FUDZOHU QHHGV GDWD SUHSURFHVVLQJ
RSHUDWLRQ DQG WKH GDWD REWDLQHG LV WKH XVHU ,3 ORFDWLRQ DQG
FRPPHQW RI HDFK KRW VHDUFK FRPPHQW 7KH FRPPHQWV IRU
HDFK ,3 WHUULWRU\ DUH FRXQWHG E\ ,3 WHUULWRU\ FODVVLILFDWLRQ
5HYLHZ GDWD LV FOHDQHG HPSW\ OLQHV DUH ILOWHUHG RXW DQG
-LHED LV SHUIRUPHG :RUG IUHTXHQF\ VWDWLVWLFV RI FRPPHQWV
DUH SHUIRUPHG E\ -LHED ZRUG VHJPHQWDWLRQ WHFKQRORJ\ DQG
WKHZRUGIUHTXHQF\GDWDRIFRPPHQWVDUHILQDOO\REWDLQHG
:ULWHS\WKRQFRGHWRUHDGWKHFVYILOHRIHDFKKRWVHDUFK
FRPPHQWDQGHVWDEOLVKWKH-LHEDIXQFWLRQWRSURFHVVHDFKKRW
VHDUFK-LHEDZRUGVHJPHQWDWLRQ
& &RPPHQWRQ6HQWLPHQW$QDO\VLV
6QRZ1/3HPRWLRQDQDO\VLVPHWKRGZDVXVHGWRFRQGXFW
HPRWLRQDQDO\VLVRQWKHFRPPHQWLQIRUPDWLRQRI'RX\LQKRW
VHDUFK DQG WKH HPRWLRQ VFRUH ZDV REWDLQHG ,I WKH HPRWLRQ
VFRUH ZDV  WKH FRPPHQW ZDV FRQVLGHUHG QHJDWLYH LI
WKH HPRWLRQ VFRUH ZDV  WKH FRPPHQW ZDV
FRQVLGHUHG QHXWUDO LI WKH HPRWLRQ VFRUH ZDV  WKH
FRPPHQWZDVFRQVLGHUHGSRVLWLYH$VVKRZQLQ7DEOHá
7$%/(,,6&25( 7$%/( 2) &200(17 6(17,0(17 $1$/<6,6
(PRWLRQVFRUH 6HQWLPHQWDQDO\VLV
 3DVVLYH
 1HXWUDO
 9LJRURXV
287After analyzing the urIofthis interface, it is found that
there are two parameters, hotword and sentence id, which
correspond to the list name and ID obtained in thefirst step.
aweme_id in the urIto obtain each hot video comment is
obtained by its hot spot name and ID. Fig. 14. Fig. 15.
~~~j~~~~1~~j;t:~ffi~rr.~im~:Â§~!1~~!1~L~~~~~~ ~~i~~~mm~1~i ~~~m!~l~~~~ili;;1~l1~mj~m~mmmr:~~E~~lli~1
Figure 14. urI display ofcomment interface
~ttp"IIâ¢â¢ â¢,~o"yin.<o. I'"<III</ " 1/â¢â¢b/~ot(,<",(~lv1d.o lli>t/1d<vico--"lotfoc.Â·â¢â¢P''''''' 'icl'.'~3&<h."".I"".M el--"<_.<b&'ot",,,d.'lt lll/l"V.'\f.:;.o'''''f'''4\",;''':lf,v.
(~9." J'U1"""'S"OU6"""" "'8U. "'4"'9 \E="""E ~'8"'=\Â£' U,,,,,.....~t."<._Iâ¢â¢1O.n'4 & off â¢â¢tâ¢â¢ â¢,ouâ¢â¢â¢,â¢â¢ooâ¢â¢,_"....o<_â¢â¢b. o<_<li â¢â¢t_Wpâ¢â¢2.vâ¢â¢â¢i",,_<odâ¢â¢
17...... "â¢â¢â¢i""_~â¢â¢ â¢â¢'?','&cooki ._.".blâ¢â¢â¢t",.5,crâ¢â¢ â¢_.i dth.10 2..."â¢â¢â¢~_".il".leâ¢â¢â¢bco~â¢â¢,_lo~IU,",.<"Â·C"'"..... r_p,..'o.....;. '2â¢â¢'''''â¢â¢â¢_n...Â·C"r...&b'''''
.""_v.ro l<"" , ..., â¢.n12,l e2&bro . , .c_onl ln â¢â¢"".&.nlin,_o'IIH"~li"U.'.in._vâ¢â¢â¢i"">l..,e,n12, ' W 2& o. _oâ¢â¢â¢â¢â¢inoow.&o._v.nion., 6& cp" _, oc._""..ll&d.v i,._â¢â¢""cy
....pl~t.ocâ¢â¢~C&do. "'i"â¢â¢1.&.H.<t i " . _ty.....~.'''''''d_tc;p_ti...0l.~â¢â¢ld.?t. ,.1..?1......6.&4 To"~o.T01t.OO~yp_1.."l.i.p.'U j.4, .SUPYQI'" ' ''''''04'4 ?Oj''''A4 H''j
",~<,> p>o<cNQ> or'.y~1" ,.f.~c_op '<"ilo.~.E?qlj.jHU'6Yz.cdo """.Â·&. -!k>I"'.Of<o.,,;; lG'â¢â¢"'Ojt ""I QÂ· .
Figure 15. Interface forobtaining aweme_id<!'1'!1!Â£li'f~*!I'l iliiJ:.csv
~ .csv
l!lm~~ I!.\fl~ lI'l.csv
JaJfj,D~~~ .csv
:9~iJaB7fJi"iNJ'fA llUt.csv
*~W1 ~:jiffi ll;i.csv
~@]!i!/;Il m~j !l:mHL18.8JJ.csv
IJ'.~!.ai.-Â¥--~.csv
1lil~ 18S~.csv
~~z..E~M ~jf]]flt .csv
NW~I&@]~ ,Â·liliit!l: .csv
IP'.titâ¢ .;1.AIl"."" lâ¢â¢â¢7'flfln.fl....
Figure 16. Comments and IP homing displayt,'H H1:. tlll"';:Â£-[H ItH.H.H l
â¢",. lIH[.nIt][ll.l
1511.". 11Dtf . fâ¢â¢'Â·U\ .â¢f1I â¢.L.
B.Data Preprocessing
Data obtained by crawler needs data preprocessing
operation, and the data obtained is the user IP location and
comment ofeach hot search comment. The comments for
each IP territory are counted by IP territory classification.
Review data is cleaned, empty lines are filtered out, and
Jieba is performed. Word frequency statistics ofcomments
are performed by Jieba word segmentation technology, and
the word frequency data ofcomments are finally obtained.
Write python code to read the csv file ofeach hot search
comment and establish the Jieba function to process each hot
search Jieba word segmentation.
C.Comment onSentiment Analysis
SnowNLP emotion analysis method was used to conduct
emotion analysis on the comment information ofDouyin hot
search, and the emotion score was obtained. Ifthe emotion
score was 0-0.33, the comment was considered negative; if
the emotion score was 0.33-0.66, the comment was
considered neutral; if the emotion score was 0.66-1.00, the
comment was considered positive. As shown in Table II.Note:The obtained comment data in Figure 17 were
stored separately, and the hot search name was used as the
file name and saved as a CSV file.Figure 17. Display of storage resultsw.4.Jt"..artl ln.,-l
â¢â¢ â¢..,. n-aA._"'1:-':'"
o
;....awemeid=7209 55S~644 5739320
iÂ·~dd=n096 195047370 10487
j.. -creat e_lime: 16736203 59i..Â·digg_co..,t =21
j..Â·~-'abel='Tj;[
~...is_author _digged=False
~Â·..labeltext=I -
!labeUyp e=Â·1ireply_com menU otal :(J
fÂ·..replyjd=O
!reply-to_replyjd=O
~status= 1
Lstick..,POsiti on=O
f..Â·text=~-1'-1l':'=:Â§nrIf~t~.!l1.tt~'f'j
W-userf..-userJxme d=Fa lse
,....user_dlgged=0B-JSON
~.boltD m.P'ompt =(nuIl)
~..convnent _config
~..comment.,Prompt=(nutl)
~-comment surpri se=[nufI)
BÂ·Â·commen~.,Then, the aweme_id obtained can be used to access the
evaluation interface, and the comments and IP location of
the video under the hotspot can be obtained normally. Fig.
16 shows. _
Finally, this method successfully realizes the comments
and IP location data crawling ofhot search list videos.
3) Data storage
The comment data obtained in the second step is stored
separately. Each hot search comment is stored separately,
and the hot search name is used as the file name and saved
as a CSV file. Fig. 17
TABLE II.SCORE TABLE OF COMMENT SEN TIMENT ANALYSIS
Emotion score Sentiment analysis
0-0.33 Passive
0.33-0.66 Neutral
0.66-1.00 Vigorous
287
Authorized licensed use limited to: University of Shanghai For Science and Technology. Downloaded on November 18,2024 at 10:07:18 UTC from IEEE Xplore.  Restrictions apply. 
7KH YDULDEOHV QHJDWLYH QHX WUDO DQG SRVLWLYH DUH WKH
DWWLWXGH RI HDFK FRPPHQW RI WKH KRW VHDUFK VR DV WR MXGJH
WKH QXPEHU RI QHJDWLYH SRVLWLYH DQG QHXWUDO FRPPHQWV LQ
WKHKRWVHDUFK:KHUHGDWD>FRPPHQW@>M@LVDVWULQJIRUPDW
RI D FRPPHQW D SDUDPHWHU LQ WKH LQWHUYDO  7KH VPDOOHU
WKHUHWXUQYDOXHWKHJUHDWHUWKHQHJDWLYHLPSDFW,QDGGLWLRQ
LI WKH QHJDWLYH XVHUV DFFRXQW IRU PRUH WKDQ  LW LV
FRQVLGHUHGWKDWWKHUHJLRQKDVDQHJDWLYHDWWLWXGHWRZDUGVWKH
KRW VHDUFK ,I WKH SRVLWLYH XVHUV DFFRXQW IRU PRUH WKDQ 
LW LV FRQVLGHUHG WKDW WKH UHJLRQ KDV D SRVLWLYH DWWLWXGH
WRZDUGV WKH KRW VHDUFK 7KH UHVW RI WKH JURXS FRQVLGHUHG WKH
FRPPHQW QHXWUDO 7KH SUHOLPLQDU\ VWDWLVWLFV RI DWWLWXGHV LQ
GLIIHUHQW UHJLRQV RI HDFK KRW VHDUFK DUH VKRZQ LQ )LJ 
EHORZ
)LJXUH$WWLWXGHVWRZDUGVKRWVHDUFKHVLQGLIIHUHQWUHJLRQV
1RWH7KH &KLQHVH FKDUDFWHUV LQ )LJXUH  DUH
SUHOLPLQDU\ VWDWLVWLFV RQ WKH DWWLWXGHV RI GLIIHUHQW UHJLRQV RI
HDFK KRW VHDUFK ZKLFK DUH WKH QDPH DQG DWWLWXGH RI WKH
UHJLRQ
''DWD 9LVXDOL]DWLRQ
7KURXJK GDWD SURFHVVLQJ WKH QXPEHU RI FRPPHQWV LQ
GLIIHUHQW UHJLRQV RI HDFK KRW VHDUFK LV DQDO\]HG DQG WKH
)ODVN YLVXDOL]DWLRQ VFUHHQ LV EXLOW 7KH 'RX\LQ KRW VHDUFK
OLVWLVEXLOWRQWKHOHIWVLGH<RXFDQFOLFNWKHQDPHRIWKHWRS
VHDUFKOLVWRQWKHOHIWWRMXPS WR WKH JUDSKRIWKH GLVWULEXWLRQ
RI WKH QXPEHU RI FRPPHQWV LQ WKH FXUUHQW WUHQGLQJ VHDUFK
)ODVNGDWDYLVXDOL]DWLRQVFUHHQLVVKRZQLQ)LJ
 J
)LJXUH'LVWULEXWLRQRIWKHQXPEHURIFRPPHQWV
1RWH 7KH &KLQHVH ZRUG FORXG PDS LQ )LJXUH  VKRZV
WKHJHQHUDOVLWXDWLRQRIWKHFRPPHQWGDWD
9 &21&/86,21
,Q WKLV SDSHU SXEOLF RSLQLRQ DQDO\VLV RI 'RX\LQ KRW
VHDUFK FRPPHQWV EDVHG RQ 1/3 KDV EHHQ EDVLFDOO\
FRPSOHWHG 7KLV SDSHU SURSRVHV WR XVH 6FUDS\ FUDZOHU
IUDPHZRUN WR FUDZO WKH KRW VHDUFK GDWD RI 'RX\LQ LQ UHDO
WLPH PRQLWRU WKH KRW VHDUFK RI 'RX\LQ FDUU\ RXW GDWD
FOHDQLQJ ZHLJKW UHPRYDO DQG YRLG UHPRYDO RQ WKH DFTXLUHG
GDWDWKHQ XVH WKH &KLQHVH ZRUG VHJPHQWDWLRQWHFKQRORJ\ RI
-LHED WR VHJPHQW WKH UHYLHZ GDWD DQG WKHQ XVH 7),')DOJRULWKPWRYHFWRUL]HWKHGDWDDIWHUZRUGVHJPHQWDWLRQ7KH
1/3 QDWXUDO ODQJXDJH SURFHVVLQJ DOJRULWKP LV XVHG WR
SURFHVV WKH WH[W DQG DQDO\]H WKH VHQWLPHQW RI WKH KRW VHDUFK
LQIRUPDWLRQ DQG FRPPHQWV 7KH SRVLWLYH QHXWUDO DQG
QHJDWLYH DWWLWXGHV RI FRPPHQWV LQ GLIIHUHQW UHJLRQV ZHUH
HYDOXDWHGDQGWKHVWDWXVRIWKHWUHQGLQJVHDUFKHVLQGLIIHUHQW
SURYLQFHV ZDV GLVSOD\HG RQ WKH PDS RI &KLQD WKURXJK GDWD
YLVXDOL]DWLRQ <RX FDQ LQWXLWLY HO\ FKHFN WKH DWWLWXGH RI HDFK
UHJLRQWR'RX\LQKRWVHDUFK5HDOWLPHFRQWURORI'RX\LQKRW
VHDUFKSXEOLFRSLQLRQ
'XHWRP\SUDFWLFDOH[SHULHQFHDQGODFNRIZULWLQJF\FOH
WKHUH DUH VWLOO PDQ\ SODFHV LQ WKLV SDSHU FDQ FRQWLQXH WR
LPSURYHDQGVXEOLPDWH+HUHDUHVRPHH[DPSOHV>@
z$GGPRUHRQOLQHSXEOLFRSLQLRQHYDOXDWLRQLQGLFDWRUV
z0RUH 'RX\LQ GDWD FDQ EH FUDZOHG IRU DQDO\VLV 1RW
RQO\ WKH ,3 DGGUHVV RI WKH RULJLQDO YLGHR DQG XVHU
FRPPHQWV EXW DOVR WKH FRPPHQWV DQG ,3 XQGHU WKH
IRUZDUGHGYLGHRFDQEHDGGHGWRWKHDQDO\VLV
z$GG VSHHFK UHFRJQLWLRQ RU WH[W H[WUDFWLRQ PHWKRG WR
LGHQWLI\ WKH ODQJXDJH FRQWHQW RU WH[W LQ WKH YLGHR
DQDO\]H WKH FRQWHQW DQG JLYH JUHDWHU ZHLJKW WR WKLV
SDUWZKHQMXGJLQJWKHQHWZRUNSXEOLFRSLQLRQ
$&.12:/('*0(17
7KLV ZRUN ZDV IXQGHG E\ <XQQDQ 3URYLQFH ORFDO
XQGHUJUDGXDWH XQLYHUVLWLHV EDVLF UHVHDUFK MRLQW VSHFLDO IXQG
SURMHFW
5()(5(1&(
>@ <%/DL<&KHQ;&+XDQG;+Â³6HQWLPHQWDQDO\VLVRISXEOLF
KHDOWK HPHUJHQF\ PLFUREORJV EDVHG RQ SURPSW HPEHGGLQJÂ´ 'DWD
DQDO\VLV DQG NQRZOHGJH GLVFRYHU\ S  
+773NQVFQNLQHWNFPVGHWDLOJKW P
O
>@ 4 ; 6RQJ . /LX DQG 4 ) ;XQ Â³5HVHDUFK RQ GHFLVLRQ PRGHOLQJ
RI SROLFHUHODWHG QHWZRUN SXEOLF RSLQLRQ PXOWLVWDJH LQWHUYHQWLRQ
EDVHGRQ%LJ'DWDÂ´0DWKHPDWLFVLQ3UDFWLFHDQG8QGHUVWDQGLQJYRO
QRS
>@ < /L = 6 ;8 DQG ; ; :DQJ Â³6HQWLPHQW DQDO\VLV PHWKRG EDVHG
RQ RQOLQH UHYLHZV DQG DSSOLFDWLRQÂ´ &RQWURO DQG GHFLVLRQ  7KH
'2,MN]\MF
>@ : :HL ; 6 6XQ / ) /L DQG < ; =KDQJ Â³6HQWLPHQW DQDO\VLV
PHWKRG EDVHG RQ WH[W GLVFXVVHV Â³ -RXUQDO RI GLJLWDO WHFKQRORJ\ DQG
DSSOLFDWLRQV'2, MFDUROFDUUROO
QNLFQ
>@ - : /LX DQG 6 4 =KDQJ Â³(YROXWLRQ DQDO\VLV RI KRW WRSLFV LQ
7LNWRN EDVHG RQ 6HQWLPHQW $QDO\VLVÂ´ ,QIRUPDWLRQ 6\VWHPV
(QJLQHHULQJQRSS
>@ = ; -LD Â³'HVLJQ DQG LPSOHPHQWDWLRQ RI VKRUW WH[W 6HQWLPHQW
DQDO\VLVV\VWHP EDVHGRQ 'HHSOHDUQLQJÂ´1DQMLQJXQLYHUVLW\RI SRVWV
DQG WHOHFRPPXQLFDWLRQV 
GRLGFQNLJQMGF
>@ 6 *DR < +XDQJ DQG : - 'DL Â³6SHHFK ZRUGV LQWHOOLJHQW
UHFRJQLWLRQ PHWKRG EDVHG RQ 1/3Â´ -RXUQDO RI LQIRUPDWLRQ
WHFKQRORJ\ YRO  QR  SS   GRL
MFQNLKG]M
288Figure 18.Attitudes towards hotsearches indifferent regions.
Figure 19. Distribution of the number ofcommentsACKNOWLEDGMENT
This work was funded by Yunnan Province local
undergraduate universities basic research joint special fund
project.algorithm tovectorize the data after word segmentation. The
NLP natural language processing algorithm is used to
process the text and analyze the sentiment ofthe hot search
information and comments. The positive, neutral and
negative attitudes ofcomments indifferent regions were
evaluated, and the status ofthe trending searches in different
provinces was displayed on the map ofChina through data
visualization. You can intuitively check the attitude ofeach
region to Douyin hotsearch. Real-time control ofDouyin hot
search public opinion.
Due to my practical experience and lack ofwriting cycle,
there are still many places in this paper can continue to
improve and sublimate. Here are some exampleslil,
Add more online public opinion evaluation indicators.
More Douyin data can be crawled for analysis. Not
only the IP address oftheoriginal video and user
comments, but also the comments and IP under the
forwarded video can be added to the analysis.
Add speech recognition or text extraction method to
identity the language content or text in the video,
analyze the content, and give greater weight to this
part when judging thenetwork public opinion.
REFERENCE
[I] Y. B.Lai, Y. Chen, X. C. Hu andX. H,"Sentiment analysis of public
health emergency microblogs based onprompt embedding," Data
analysis and knowledge discovery: p. I, 2023.
HTTP://kns.cnki.net/kcms/detail/l 0.14 78.g2.20230206.1809 .00I.htm
I
[2] Q. X. Song, K. Liu and Q. F. Xun, "Research ondecision modeling
ofpolice-related network public opinion multi-stage intervention
based on Big Data," Mathematics inPractice andUnderstanding, vol.
53,no.2,p.13,2023.
[3] Y. Li, Z. S. XU and X. X. Wang, "Sentiment analysis method based
ononline reviews andapplication," Control and decision, 2022. The
DOl: 10.13195 / j.k. zyjc. 2022.1788.
[4] W. Wei, X. S. Sun, L.F. Li and Y. X. Zhang, "Sentiment analysis
method based on text discusses, "Journal of digital technology and
applications, 2022, 40 (12) : 1-3 +22. DOl: 10.19695/ j.carol carroll
nkicnI2-1369.2022.12.01.
[5] J. W. Liu and S. Q. Zhang, "Evolution analysis of hot topics in
Tiktok based on Sentiment Analysis," Information Systems
Engineering, no. 12, pp. 137-140,2022.
[6] Z. X. Jia, "Design and implementation of short text Sentiment
analysis system based on Deep learning," Nanjing university of posts
and telecommunications, 2022.
doi:10.27251/d.cnki.gnjdc.2022.000420.
[7] S. Gao, Y. Huang, and W. J. Dai ,"Speech words intelligent
recognition method based on NLP," Journal of information
technology, vol. 46, no. 11, pp. 66-70, 2022, doi:
10.13274/j.cnki.hdzj.2022. I 1.012.The variables negative, neutral and positrve are the
attitude ofeach comment ofthe hot search, so as to judge
thenumber ofnegative, positive and neutral comments in
the hot search. Where data[" comment "][j] is a string format
ofa comment, aparameter in the interval (0,1). The smaller
the return value, the greater thenegative impact. In addition,
ifthe negative users account for more than 60%, it is
considered that the region has a negative attitude towards the
hot search. Ifthepositive users account for more than 60%,
it is considered that the region has a positive attitude
towards the hot search. The rest ofthe group considered the
comment neutral. The preliminary statistics ofattitudes in
different regions ofeach hot search are shown in Fig. 18
below:
Note: The Chinese characters in Figure 18 are
preliminary statistics on the attitudes ofdifferent regions of
each hot search, which are the name and attitude ofthe
region.
D.Data Visualization
Through data processing, thenumber ofcomments in
different regions ofeach hot search is analyzed, and the
Flask visualization screen is built. The Douyin hot search
list is built on the left side. You can click the name ofthe top
search list on the left to jump to the graph ofthedistribution
ofthenumber ofcomments in the current trending search.
Flask data visualization screen is shown in Fig. 19.
I
Note: The Chinese word cloud map in Figure 19 shows
the general situation ofthecomment data.
V. CONCLUSION
In this paper, public opinion analysis ofDouyin hot
search comments based on NLP has been basically
completed. This paper proposes to use Scrapy crawler
framework to crawl the hot search data ofDouyin in real
time, monitor the hot search ofDouyin, carry out data
cleaning, weight removal and void removal on the acquired
data, then use the Chinese word segmentation technology of
Jieba to segment the review data, and then use TF-IDF
288
Authorized licensed use limited to: University of Shanghai For Science and Technology. Downloaded on November 18,2024 at 10:07:18 UTC from IEEE Xplore.  Restrictions apply. 